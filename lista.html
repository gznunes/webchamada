<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="teste2.css">
    
    <title>Professor</title>
</head>
<body >

    <!-- <div class="container">
        <div class="row">
          <div class="col-sm">
            
            </div>
          <div class="col-sm">
            
          </div>
          <div class="col-sm">
            
          </div>
        </div>
      </div> -->
      <div class="container">
        <div class="item item-1"><h1>Sala: </h1><br></div>
        <div class="item item-2"><button type="submit" class="btn btn-primary">Update</button></div>
        <div class="item item-3"><ul class="list-group"></ul><br></div>
        
      </div>

      <div class="container">
        
        <div class="item item-2"></div>
        
      </div>

      
      

    </br>

    

    
    
        
    <!-- <button class="btn" style="background: blue; color: white;">Update</button> -->
    

    
    
    <script>
        const url = "https://api-livros.onrender.com/chamada/";
        // const sala = "teste";
        const sala = Math.floor((Math.random() * 8999) + 1000);
        const codsala = url + sala;
        console.log(sala);

        document.querySelector('h1').insertAdjacentHTML("beforeend",sala);

        const btnEl = document.querySelector('.btn');

        const clickHandler = async () => {
            try {
                const res = await fetch(codsala);
                const data = await res.json();

                if(!res.ok){
                    console.log(data.description)
                }

                const li = document.querySelector('ul')
                li.innerHTML = "";

                data.forEach(user => {
                const markup = `<li class="list-group-item">${user.nome}</li>`;
                document.querySelector('ul').insertAdjacentHTML("beforeend",markup);
                // const li = document.querySelector('ul')
                });
            } catch (error) {
                console.log(error)
            }
        };

        btnEl.addEventListener('click', clickHandler);

        


        // fetch('https://api-livros.onrender.com/chamada').then(res => {
        //     return res.json();
        // }).then(data => {
        //     data.forEach(user => {
        //         const markup = `<li>${user.id}, ${user.sala}, ${user.nome}</li>`;
        //         document.querySelector('ul').insertAdjacentHTML("beforeend",markup);
        //     });
        // })
    </script>
    
    
</body>
</html>